import random

def play_dungeon():
    ranks = list(range(2, 11)) + [11, 12, 13, 14] # J=11, Q=12, K=13, A=14
    suits = ['â™ ï¸', 'â™£ï¸', 'â¤ï¸', 'â™¦ï¸']
    deck = [(r, s) for s in suits for r in ranks]
    random.shuffle(deck)

    hp = 20
    weapon = 0
    last_enemy_defeated_with_weapon = 0
    
    print("ğŸ°ã€Œé€€å±ˆã•ã›ã¡ã‚ƒã£ã¦ã”ã‚ã‚“ã´ã‚‡ã‚“ï¼æœ¬æ°—ã®ãƒ©ãƒ“ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³ã¸æ‹›å¾…ã™ã‚‹ã´ã‚‡ã‚“ï¼ã€")
    print("ğŸ°ã€ŒéŸ³é­”æ³•ã ã‘ã˜ã‚ƒå‹ã¦ãªã„ã€æˆ¦ç•¥ãŒå¿…è¦ãªã‚²ãƒ¼ãƒ ã ã´ã‚‡ã‚“ï¼â™ªã€")

    while deck and hp > 0:
        room = [deck.pop() for _ in range(min(4, len(deck)))]
        
        while room and hp > 0:
            print(f"\n--- ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ ---")
            print(f"HP: {hp} | è£…å‚™ä¸­ã®æ­¦å™¨: {weapon} (å‰å›å€’ã—ãŸæ•µ: {last_enemy_defeated_with_weapon})")
            print(f"ç›®ã®å‰ã®ã‚«ãƒ¼ãƒ‰:")
            for i, card in enumerate(room):
                print(f"{i}: {card[1]}{card[0]}", end="  ")
            
            try:
                choice = int(input(f"\nè¡Œå‹•ã‚’é¸ã‚“ã§ã´ã‚‡ã‚“ (0-{len(room)-1}): "))
                card = room.pop(choice)
            except:
                continue

            rank, suit = card

            if suit in ['â™ ï¸', 'â™£ï¸']: # æ•µ
                damage = max(0, rank - weapon)
                hp -= damage
                print(f"ğŸ°ã€Œæ•µã®æ”»æ’ƒï¼ {damage} ã®ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚’å—ã‘ãŸã´ã‚‡ã‚“ï¼ã€")
                
                if weapon > 0:
                    if rank >= last_enemy_defeated_with_weapon:
                        last_enemy_defeated_with_weapon = rank
                    else:
                        print("ğŸ°ã€Œã‚ã‚ã£ï¼ä»Šã®æ•µã¯å¼±ã™ãã¦ã€æ­¦å™¨ã®é­”æ³•ãŒè§£ã‘ã¡ã‚ƒã£ãŸã´ã‚‡ã‚“ï¼ã€")
                        weapon = 0
                        last_enemy_defeated_with_weapon = 0

            elif suit == 'â¤ï¸': # å›å¾©
                hp = min(20, hp + rank)
                print(f"ğŸ°ã€ŒãŠã„ã—ã„æœ¨ã®å®Ÿï¼ HPãŒ {rank} å›å¾©ã—ãŸã´ã‚‡ã‚“ï¼ã€")

            elif suit == 'â™¦ï¸': # æ­¦å™¨
                weapon = rank
                last_enemy_defeated_with_weapon = 0
                print(f"ğŸ°ã€Œæ–°ã—ã„é­”æ³•ã®æ–ã‚’è£…å‚™ã—ãŸã´ã‚‡ã‚“ï¼ å¼·ã•: {weapon}ã€")

            if hp <= 0:
                print("\nğŸ’€ ç›®ã®å‰ãŒçœŸã£æš—ã«ãªã£ãŸ...ã€‚ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã ã´ã‚‡ã‚“ã€‚")
                return

    if hp > 0:
        print("\nğŸŠ ãŠã‚ã§ã¨ã†ï¼ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³ã‚’å®Œå…¨æ”»ç•¥ã—ãŸã´ã‚‡ã‚“ï¼å›ã¯å¤©æ‰ã ã´ã‚‡ã‚“ï¼â™ª")

if __name__ == "__main__":
    play_dungeon()